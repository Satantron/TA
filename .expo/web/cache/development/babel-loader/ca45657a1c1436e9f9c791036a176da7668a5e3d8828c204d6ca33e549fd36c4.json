{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport { useBookmarks } from \"../context/BookmarksContext\";\nimport { MaterialIcons } from '@expo/vector-icons';\nimport useWebBack from \"../utils/useWebBack\";\nimport PdfViewerWeb from \"../components/PdfViewerWeb\";\nimport { getBackgroundFor } from \"../utils/backgrounds\";\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function MythDetailScreen(_ref) {\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var item = route.params;\n  var _useBookmarks = useBookmarks(),\n    bookmarks = _useBookmarks.bookmarks,\n    addBookmark = _useBookmarks.addBookmark,\n    removeBookmark = _useBookmarks.removeBookmark;\n  if (Platform.OS === 'web') useWebBack(navigation);\n  var _React$useState = React.useState(null),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    bgUrl = _React$useState2[0],\n    setBgUrl = _React$useState2[1];\n  React.useEffect(function () {\n    _asyncToGenerator(function* () {\n      var url = yield getBackgroundFor(item.mythology);\n      setBgUrl(url);\n    })();\n  }, [item == null ? void 0 : item.mythology]);\n  var bookmarked = bookmarks.find(function (b) {\n    return b.id === item.id;\n  });\n  function toggleBookmark() {\n    if (bookmarked) removeBookmark(item.id);else addBookmark(item);\n  }\n  return _jsx(ScrollView, {\n    style: styles.container,\n    contentContainerStyle: {\n      padding: 12\n    },\n    children: _jsxs(ImageBackground, {\n      source: bgUrl ? {\n        uri: bgUrl\n      } : null,\n      style: styles.bg,\n      imageStyle: styles.bgImage,\n      children: [_jsxs(View, {\n        style: styles.headerRow,\n        children: [_jsx(Image, {\n          source: {\n            uri: item.image_url\n          },\n          style: styles.portrait\n        }), _jsxs(View, {\n          style: styles.headerTextWrap,\n          children: [_jsxs(View, {\n            style: {\n              flexDirection: 'row',\n              justifyContent: 'space-between',\n              alignItems: 'center'\n            },\n            children: [_jsxs(View, {\n              style: {\n                flex: 1\n              },\n              children: [_jsx(Text, {\n                style: styles.title,\n                children: item.name\n              }), _jsx(Text, {\n                style: styles.myth,\n                children: item.mythology\n              })]\n            }), _jsx(TouchableOpacity, {\n              onPress: toggleBookmark,\n              style: [styles.bookmarkButton, bookmarked ? styles.bookmarked : styles.notBookmarked],\n              accessibilityLabel: \"Toggle bookmark\",\n              children: _jsx(MaterialIcons, {\n                name: bookmarked ? 'bookmark' : 'bookmark-border',\n                size: 22,\n                color: bookmarked ? '#111' : '#ffd166'\n              })\n            })]\n          }), _jsx(Text, {\n            style: styles.desc,\n            children: item.short_desc\n          })]\n        })]\n      }), item.long_desc ? _jsxs(_Fragment, {\n        children: [_jsx(Text, {\n          style: styles.sectionTitle,\n          children: \"Detail\"\n        }), _jsx(Text, {\n          style: styles.more,\n          children: item.long_desc\n        })]\n      }) : null, item.source_url ? _jsx(_Fragment, {\n        children: String(item.source_url).toLowerCase().endsWith('.pdf') ? _jsx(PdfViewerWeb, {\n          url: item.source_url\n        }) : _jsx(TouchableOpacity, {\n          onPress: function onPress() {\n            return Linking.openURL(item.source_url);\n          },\n          children: _jsx(Text, {\n            style: styles.link,\n            children: \"Buka sumber\"\n          })\n        })\n      }) : _jsx(Text, {\n        style: styles.note,\n        children: \"Sumber tidak tersedia.\"\n      })]\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: '#060606'\n  },\n  portrait: {\n    width: 120,\n    height: 170,\n    borderRadius: 8\n  },\n  headerRow: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    gap: 12\n  },\n  headerTextWrap: {\n    flex: 1\n  },\n  bg: {\n    flex: 1\n  },\n  bgImage: {\n    opacity: 0.12\n  },\n  title: {\n    color: '#fff',\n    fontSize: 24,\n    fontWeight: '700',\n    marginTop: 12\n  },\n  myth: {\n    color: '#ffd166',\n    marginTop: 6\n  },\n  desc: {\n    color: '#ddd',\n    marginTop: 10,\n    lineHeight: 20\n  },\n  sectionTitle: {\n    color: '#fff',\n    marginTop: 14,\n    fontSize: 18\n  },\n  more: {\n    color: '#bbb',\n    marginTop: 6\n  },\n  link: {\n    color: '#8fd3ff',\n    marginTop: 10\n  },\n  note: {\n    color: '#666',\n    marginTop: 10\n  },\n  bookmarkButton: {\n    backgroundColor: '#ffd166',\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    borderRadius: 8,\n    marginLeft: 8\n  },\n  bookmarkText: {\n    color: '#111',\n    fontWeight: '700'\n  },\n  bookmarked: {\n    backgroundColor: '#ffd166'\n  },\n  notBookmarked: {\n    borderWidth: 1,\n    borderColor: '#ffd166',\n    backgroundColor: 'transparent'\n  }\n});","map":{"version":3,"names":["React","View","Text","Image","StyleSheet","ScrollView","Linking","TouchableOpacity","Platform","ImageBackground","useBookmarks","MaterialIcons","useWebBack","PdfViewerWeb","getBackgroundFor","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MythDetailScreen","_ref","route","navigation","item","params","_useBookmarks","bookmarks","addBookmark","removeBookmark","OS","_React$useState","useState","_React$useState2","_slicedToArray","bgUrl","setBgUrl","useEffect","_asyncToGenerator","url","mythology","bookmarked","find","b","id","toggleBookmark","style","styles","container","contentContainerStyle","padding","children","source","uri","bg","imageStyle","bgImage","headerRow","image_url","portrait","headerTextWrap","flexDirection","justifyContent","alignItems","flex","title","name","myth","onPress","bookmarkButton","notBookmarked","accessibilityLabel","size","color","desc","short_desc","long_desc","sectionTitle","more","source_url","String","toLowerCase","endsWith","openURL","link","note","create","backgroundColor","width","height","borderRadius","gap","opacity","fontSize","fontWeight","marginTop","lineHeight","paddingHorizontal","paddingVertical","marginLeft","bookmarkText","borderWidth","borderColor"],"sources":["C:/SoftEng/VScode/Javascript/TA/screens/MythDetailScreen.js"],"sourcesContent":["import React from 'react';\r\nimport { View, Text, Image, StyleSheet, ScrollView, Linking, TouchableOpacity, Platform, ImageBackground } from 'react-native';\r\nimport { useBookmarks } from '../context/BookmarksContext';\r\nimport { MaterialIcons } from '@expo/vector-icons';\r\nimport useWebBack from '../utils/useWebBack';\r\nimport PdfViewerWeb from '../components/PdfViewerWeb';\r\nimport { getBackgroundFor } from '../utils/backgrounds';\r\n\r\nexport default function MythDetailScreen({ route, navigation }) {\r\n  const item = route.params;\r\n  const { bookmarks, addBookmark, removeBookmark } = useBookmarks();\r\n\r\n  // register web back behaviour when applicable\r\n  if (Platform.OS === 'web') useWebBack(navigation);\r\n\r\n  const [bgUrl, setBgUrl] = React.useState(null);\r\n  React.useEffect(() => {\r\n    (async () => {\r\n      const url = await getBackgroundFor(item.mythology);\r\n      setBgUrl(url);\r\n    })();\r\n  }, [item?.mythology]);\r\n\r\n  const bookmarked = bookmarks.find(b => b.id === item.id);\r\n\r\n  function toggleBookmark() {\r\n    if (bookmarked) removeBookmark(item.id);\r\n    else addBookmark(item);\r\n  }\r\n\r\n  return (\r\n    <ScrollView style={styles.container} contentContainerStyle={{ padding: 12 }}>\r\n      <ImageBackground source={bgUrl ? { uri: bgUrl } : null} style={styles.bg} imageStyle={styles.bgImage}>\r\n      <View style={styles.headerRow}>\r\n        <Image source={{ uri: item.image_url }} style={styles.portrait} />\r\n        <View style={styles.headerTextWrap}>\r\n          <View style={{ flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <View style={{ flex: 1 }}>\r\n              <Text style={styles.title}>{item.name}</Text>\r\n              <Text style={styles.myth}>{item.mythology}</Text>\r\n            </View>\r\n            <TouchableOpacity onPress={toggleBookmark} style={[styles.bookmarkButton, bookmarked ? styles.bookmarked : styles.notBookmarked]} accessibilityLabel=\"Toggle bookmark\">\r\n              <MaterialIcons name={bookmarked ? 'bookmark' : 'bookmark-border'} size={22} color={bookmarked ? '#111' : '#ffd166'} />\r\n            </TouchableOpacity>\r\n          </View>\r\n          <Text style={styles.desc}>{item.short_desc}</Text>\r\n        </View>\r\n      </View>\r\n\r\n      {item.long_desc ? (\r\n        <>\r\n          <Text style={styles.sectionTitle}>Detail</Text>\r\n          <Text style={styles.more}>{item.long_desc}</Text>\r\n        </>\r\n      ) : null}\r\n\r\n      {item.source_url ? (\r\n        <>\r\n          {String(item.source_url).toLowerCase().endsWith('.pdf') ? (\r\n            <PdfViewerWeb url={item.source_url} />\r\n          ) : (\r\n            <TouchableOpacity onPress={() => Linking.openURL(item.source_url)}>\r\n              <Text style={styles.link}>Buka sumber</Text>\r\n            </TouchableOpacity>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <Text style={styles.note}>Sumber tidak tersedia.</Text>\r\n      )}\r\n      </ImageBackground>\r\n    </ScrollView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { backgroundColor: '#060606' },\r\n  portrait: { width: 120, height: 170, borderRadius: 8 },\r\n  headerRow: { flexDirection: 'row', alignItems: 'flex-start', gap: 12 },\r\n  headerTextWrap: { flex: 1 },\r\n  bg: { flex: 1 },\r\n  bgImage: { opacity: 0.12 },\r\n  title: { color: '#fff', fontSize: 24, fontWeight: '700', marginTop: 12 },\r\n  myth: { color: '#ffd166', marginTop: 6 },\r\n  desc: { color: '#ddd', marginTop: 10, lineHeight: 20 },\r\n  sectionTitle: { color: '#fff', marginTop: 14, fontSize: 18 },\r\n  more: { color: '#bbb', marginTop: 6 },\r\n  link: { color: '#8fd3ff', marginTop: 10 },\r\n  note: { color: '#666', marginTop: 10 }\r\n  ,bookmarkButton: { backgroundColor: '#ffd166', paddingHorizontal: 12, paddingVertical: 8, borderRadius: 8, marginLeft: 8 },\r\n  bookmarkText: { color: '#111', fontWeight: '700' },\r\n  bookmarked: { backgroundColor: '#ffd166' },\r\n  notBookmarked: { borderWidth: 1, borderColor: '#ffd166', backgroundColor: 'transparent' }\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}