{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect, useCallback } from 'react';\nexport default function usePagination(_ref) {\n  var _ref$items = _ref.items,\n    items = _ref$items === void 0 ? null : _ref$items,\n    _ref$fetchPage = _ref.fetchPage,\n    fetchPage = _ref$fetchPage === void 0 ? null : _ref$fetchPage,\n    _ref$initialPage = _ref.initialPage,\n    initialPage = _ref$initialPage === void 0 ? 1 : _ref$initialPage,\n    _ref$initialPageSize = _ref.initialPageSize,\n    initialPageSize = _ref$initialPageSize === void 0 ? 10 : _ref$initialPageSize;\n  var _useState = useState(initialPage),\n    _useState2 = _slicedToArray(_useState, 2),\n    page = _useState2[0],\n    setPage = _useState2[1];\n  var _useState3 = useState(initialPageSize),\n    _useState4 = _slicedToArray(_useState3, 2),\n    pageSize = _useState4[0],\n    setPageSize = _useState4[1];\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    pageData = _useState6[0],\n    setPageData = _useState6[1];\n  var _useState7 = useState(0),\n    _useState8 = _slicedToArray(_useState7, 2),\n    total = _useState8[0],\n    setTotal = _useState8[1];\n  var totalPages = Math.max(1, Math.ceil((total || (items ? items.length : 0)) / pageSize));\n  var load = useCallback(_asyncToGenerator(function* () {\n    if (typeof fetchPage === 'function') {\n      try {\n        var res = yield fetchPage(page, pageSize);\n        if (res) {\n          setPageData(res.data || []);\n          setTotal(typeof res.total === 'number' ? res.total : res.data ? res.data.length : 0);\n        } else {\n          setPageData([]);\n          setTotal(0);\n        }\n      } catch (err) {\n        setPageData([]);\n        setTotal(0);\n      }\n    } else if (Array.isArray(items)) {\n      var start = (page - 1) * pageSize;\n      var end = start + pageSize;\n      var slice = items.slice(start, end);\n      setPageData(slice);\n      setTotal(items.length);\n    } else {\n      setPageData([]);\n      setTotal(0);\n    }\n  }), [items, fetchPage, page, pageSize]);\n  useEffect(function () {\n    if (page > totalPages) setPage(1);\n  }, [pageSize, total, totalPages]);\n  useEffect(function () {\n    load();\n  }, [load]);\n  return {\n    pageData: pageData,\n    page: page,\n    setPage: setPage,\n    pageSize: pageSize,\n    setPageSize: setPageSize,\n    total: total,\n    totalPages: totalPages,\n    reload: load\n  };\n}","map":{"version":3,"names":["useState","useEffect","useCallback","usePagination","_ref","_ref$items","items","_ref$fetchPage","fetchPage","_ref$initialPage","initialPage","_ref$initialPageSize","initialPageSize","_useState","_useState2","_slicedToArray","page","setPage","_useState3","_useState4","pageSize","setPageSize","_useState5","_useState6","pageData","setPageData","_useState7","_useState8","total","setTotal","totalPages","Math","max","ceil","length","load","_asyncToGenerator","res","data","err","Array","isArray","start","end","slice","reload"],"sources":["C:/SoftEng/VScode/Javascript/TA/utils/usePagination.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\r\n\r\n// Hook supports two modes:\r\n// - client-side: pass `items` array and it'll paginate in-memory\r\n// - server-side: pass `fetchPage` async function ({page, pageSize}) => { data, total }\r\nexport default function usePagination({ items = null, fetchPage = null, initialPage = 1, initialPageSize = 10 }) {\r\n  const [page, setPage] = useState(initialPage);\r\n  const [pageSize, setPageSize] = useState(initialPageSize);\r\n  const [pageData, setPageData] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n  const totalPages = Math.max(1, Math.ceil((total || (items ? items.length : 0)) / pageSize));\r\n\r\n  const load = useCallback(async () => {\r\n    if (typeof fetchPage === 'function') {\r\n      try {\r\n        const res = await fetchPage(page, pageSize);\r\n        if (res) {\r\n          setPageData(res.data || []);\r\n          setTotal(typeof res.total === 'number' ? res.total : (res.data ? res.data.length : 0));\r\n        } else {\r\n          setPageData([]);\r\n          setTotal(0);\r\n        }\r\n      } catch (err) {\r\n        setPageData([]);\r\n        setTotal(0);\r\n      }\r\n    } else if (Array.isArray(items)) {\r\n      const start = (page - 1) * pageSize;\r\n      const end = start + pageSize;\r\n      const slice = items.slice(start, end);\r\n      setPageData(slice);\r\n      setTotal(items.length);\r\n    } else {\r\n      setPageData([]);\r\n      setTotal(0);\r\n    }\r\n  }, [items, fetchPage, page, pageSize]);\r\n\r\n  useEffect(() => {\r\n    // ensure page is within bounds when pageSize or total changes\r\n    if (page > totalPages) setPage(1);\r\n  }, [pageSize, total, totalPages]);\r\n\r\n  useEffect(() => {\r\n    load();\r\n  }, [load]);\r\n\r\n  return {\r\n    pageData,\r\n    page,\r\n    setPage,\r\n    pageSize,\r\n    setPageSize,\r\n    total,\r\n    totalPages,\r\n    reload: load\r\n  };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}