{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { fetchMyths } from \"../supabase\";\nimport { LOCAL_SEED, MYTHOLOGIES } from \"../data/seed\";\nimport SearchBar from \"../components/SearchBar\";\nimport MythCard from \"../components/MythCard\";\nimport usePagination from \"../utils/usePagination\";\nimport PaginationControls from \"../components/PaginationControls\";\nimport { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function HomeScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    myths = _useState2[0],\n    setMyths = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    query = _useState4[0],\n    setQuery = _useState4[1];\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var data = yield fetchMyths();\n      if (data && data.length) setMyths(data);else setMyths(LOCAL_SEED);\n    })();\n  }, []);\n  var filtered = myths.filter(function (m) {\n    var q = (query || '').trim().toLowerCase();\n    if (!q) return false;\n    var name = (m.name || '').toLowerCase();\n    var tags = (m.tags || '').toLowerCase();\n    var short = (m.short_desc || '').toLowerCase();\n    return name.includes(q) || tags.includes(q) || short.includes(q);\n  });\n  var filteredPager = usePagination({\n    items: filtered,\n    initialPageSize: 6\n  });\n  var collectionsPager = usePagination({\n    items: MYTHOLOGIES,\n    initialPageSize: 6\n  });\n  var renderItem = function renderItem(_ref3) {\n    var item = _ref3.item;\n    return _jsx(TouchableOpacity, {\n      onPress: function onPress() {\n        return navigation.navigate('Collections', {\n          screen: 'MythList',\n          params: {\n            mythology: item\n          }\n        });\n      },\n      style: styles.item,\n      children: _jsx(Text, {\n        style: styles.itemText,\n        children: item\n      })\n    });\n  };\n  var renderResult = function renderResult(_ref4) {\n    var item = _ref4.item;\n    return _jsx(View, {\n      style: {\n        marginBottom: 8\n      },\n      children: _jsx(MythCard, {\n        item: item,\n        onPress: function onPress() {\n          return navigation.navigate('Collections', {\n            screen: 'MythDetail',\n            params: item\n          });\n        }\n      })\n    });\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"Lorebrary\"\n    }), _jsx(Text, {\n      style: styles.subtitle,\n      children: \"Katalog tokoh mitos dunia\"\n    }), _jsx(SearchBar, {\n      value: query,\n      onChange: setQuery,\n      placeholder: \"Search by name, tag, or description...\"\n    }), query ? _jsxs(View, {\n      style: {\n        flex: 1\n      },\n      children: [_jsx(Text, {\n        style: styles.section,\n        children: \"Search results\"\n      }), filteredPager.pageData.length === 0 ? _jsx(Text, {\n        style: {\n          color: '#888',\n          marginTop: 8\n        },\n        children: \"No results.\"\n      }) : _jsxs(_Fragment, {\n        children: [_jsx(FlatList, {\n          data: filteredPager.pageData,\n          keyExtractor: function keyExtractor(i) {\n            return String(i.id);\n          },\n          renderItem: renderResult\n        }), _jsx(PaginationControls, {\n          page: filteredPager.page,\n          setPage: filteredPager.setPage,\n          totalPages: filteredPager.totalPages\n        })]\n      })]\n    }) : _jsxs(_Fragment, {\n      children: [_jsx(Text, {\n        style: styles.section,\n        children: \"Mythology Collections\"\n      }), _jsx(FlatList, {\n        data: collectionsPager.pageData,\n        keyExtractor: function keyExtractor(i) {\n          return i;\n        },\n        renderItem: renderItem\n      }), _jsx(PaginationControls, {\n        page: collectionsPager.page,\n        setPage: collectionsPager.setPage,\n        totalPages: collectionsPager.totalPages\n      })]\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 16,\n    backgroundColor: '#0b0b0b'\n  },\n  title: {\n    color: '#ffd166',\n    fontSize: 28,\n    fontWeight: '700',\n    marginBottom: 4\n  },\n  subtitle: {\n    color: '#ccc',\n    marginBottom: 12\n  },\n  section: {\n    color: '#fff',\n    marginTop: 12,\n    marginBottom: 6,\n    fontSize: 18\n  },\n  item: {\n    padding: 12,\n    backgroundColor: '#151515',\n    marginVertical: 6,\n    borderRadius: 8\n  },\n  itemText: {\n    color: '#fff',\n    fontSize: 16\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","View","Text","StyleSheet","FlatList","TouchableOpacity","fetchMyths","LOCAL_SEED","MYTHOLOGIES","SearchBar","MythCard","usePagination","PaginationControls","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","HomeScreen","_ref","navigation","_useState","_useState2","_slicedToArray","myths","setMyths","_useState3","_useState4","query","setQuery","_asyncToGenerator","data","length","filtered","filter","m","q","trim","toLowerCase","name","tags","short","short_desc","includes","filteredPager","items","initialPageSize","collectionsPager","renderItem","_ref3","item","onPress","navigate","screen","params","mythology","style","styles","children","itemText","renderResult","_ref4","marginBottom","container","title","subtitle","value","onChange","placeholder","flex","section","pageData","color","marginTop","keyExtractor","i","String","id","page","setPage","totalPages","create","padding","backgroundColor","fontSize","fontWeight","marginVertical","borderRadius"],"sources":["C:/SoftEng/VScode/Javascript/TA/screens/HomeScreen.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { View, Text, StyleSheet, FlatList, TouchableOpacity } from 'react-native';\r\nimport { fetchMyths } from '../supabase';\r\nimport { LOCAL_SEED, MYTHOLOGIES } from '../data/seed';\r\nimport SearchBar from '../components/SearchBar';\r\nimport MythCard from '../components/MythCard';\r\nimport usePagination from '../utils/usePagination';\r\nimport PaginationControls from '../components/PaginationControls';\r\n\r\nexport default function HomeScreen({ navigation }) {\r\n  const [myths, setMyths] = useState([]);\r\n  const [query, setQuery] = useState('');\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const data = await fetchMyths();\r\n      if (data && data.length) setMyths(data);\r\n      else setMyths(LOCAL_SEED);\r\n    })();\r\n  }, []);\r\n\r\n  // filtered results for query (client-side filter) and paginated\r\n  const filtered = myths.filter(m => {\r\n    const q = (query || '').trim().toLowerCase();\r\n    if (!q) return false;\r\n    const name = (m.name || '').toLowerCase();\r\n    const tags = (m.tags || '').toLowerCase();\r\n    const short = (m.short_desc || '').toLowerCase();\r\n    return name.includes(q) || tags.includes(q) || short.includes(q);\r\n  });\r\n\r\n  const filteredPager = usePagination({ items: filtered, initialPageSize: 6 });\r\n  const collectionsPager = usePagination({ items: MYTHOLOGIES, initialPageSize: 6 });\r\n\r\n  const renderItem = ({ item }) => (\r\n    <TouchableOpacity onPress={() => navigation.navigate('Collections', { screen: 'MythList', params: { mythology: item } })} style={styles.item}>\r\n      <Text style={styles.itemText}>{item}</Text>\r\n    </TouchableOpacity>\r\n  );\r\n\r\n  const renderResult = ({ item }) => (\r\n    <View style={{ marginBottom: 8 }}>\r\n      <MythCard item={item} onPress={() => navigation.navigate('Collections', { screen: 'MythDetail', params: item })} />\r\n    </View>\r\n  );\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>Lorebrary</Text>\r\n      <Text style={styles.subtitle}>Katalog tokoh mitos dunia</Text>\r\n\r\n      <SearchBar value={query} onChange={setQuery} placeholder=\"Search by name, tag, or description...\" />\r\n\r\n      {query ? (\r\n        <View style={{ flex: 1 }}>\r\n          <Text style={styles.section}>Search results</Text>\r\n          {filteredPager.pageData.length === 0 ? (\r\n            <Text style={{ color: '#888', marginTop: 8 }}>No results.</Text>\r\n          ) : (\r\n            <>\r\n              <FlatList data={filteredPager.pageData} keyExtractor={(i) => String(i.id)} renderItem={renderResult} />\r\n              <PaginationControls page={filteredPager.page} setPage={filteredPager.setPage} totalPages={filteredPager.totalPages} />\r\n            </>\r\n          )}\r\n        </View>\r\n      ) : (\r\n        <>\r\n          <Text style={styles.section}>Mythology Collections</Text>\r\n          <FlatList data={collectionsPager.pageData} keyExtractor={(i) => i} renderItem={renderItem} />\r\n          <PaginationControls page={collectionsPager.page} setPage={collectionsPager.setPage} totalPages={collectionsPager.totalPages} />\r\n        </>\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { flex: 1, padding: 16, backgroundColor: '#0b0b0b' },\r\n  title: { color: '#ffd166', fontSize: 28, fontWeight: '700', marginBottom: 4 },\r\n  subtitle: { color: '#ccc', marginBottom: 12 },\r\n  section: { color: '#fff', marginTop: 12, marginBottom: 6, fontSize: 18 },\r\n  item: { padding: 12, backgroundColor: '#151515', marginVertical: 6, borderRadius: 8 },\r\n  itemText: { color: '#fff', fontSize: 16 }\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}